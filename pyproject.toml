[project]
name = "hpx"
dependencies = [
    "numpy>=1.23, <2",
]
requires-python = ">=3.9"
version = "0.0.1"

[build-system]
build-backend = 'mesonpy'
requires = [
    "meson>=1.4.0",
    "meson-python",
    "numpy>=2.0.0rc1",
]

[tool.cibuildwheel.environment]
CMAKE = "$(pwd)/micromamba/bin/cmake"
BIN_FOLDER = "$(pwd)/micromamba/bin"
PREFIX_LOCATION = "$(pwd)/micromamba"
INIT_YES = ""
CONDA_FORGE_YES = "Y"

[tool.cibuildwheel]
before-all = [
    "curl -L https://micro.mamba.pm/install.sh | bash",
    "micromamba/bin/micromamba --prefix micromamba install cgal-cpp cmake"
]

# [tool.cibuildwheel.macos.environment]
# CMAKE = "~/micromamba/bin/cmake"
# CC = "$(brew --prefix llvm@15)/bin/clang"
# CXX = "$(brew --prefix llvm@15)/bin/clang++"
